<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <title>Sign Up</title>
    <link rel="stylesheet" href="loginpage.css">
</head>

<body>
    <div class="entire">
        <p class="name">Create Account</p>

        <input id="fullName" type="text" placeholder="Full Name">
        <input id="email" type="text" placeholder="Email or Phone Number">
        <input id="password" type="password" placeholder="Password">
        <input id="confirmPassword" type="password" placeholder="Confirm Password">

        <button id="signupBtn">Sign Up</button>

        <p class="already">
            Already have an account? <a href="loginpage.html" id="loginLink" style="color: blue; cursor: pointer;">
            Log in
        </a>
        </p>
    </div>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import {
            getAuth,
            createUserWithEmailAndPassword,
            updateProfile,
            onAuthStateChanged
        } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBcKwN19YU2vNb8bCdQRvenKVVTgMbbsR8",
            authDomain: "palntry.firebaseapp.com",
            projectId: "palntry",
            storageBucket: "palntry.firebasestorage.app",
            messagingSenderId: "664869269406",
            appId: "1:664869269406:web:2cdc64f5e64b42d0bdb08f",
            measurementId: "G-M8NFF4V16W"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // If already logged in send to homepage
        onAuthStateChanged(auth, user => {
            if (user) window.location.href = "homepage.html";
        });

        // wire up your form button (assumes elements with ids: signupEmail, signupPassword, signupBtn, displayName)
        document.getElementById("signupBtn").addEventListener("click", async () => {
            const email = document.getElementById("signupEmail").value;
            const password = document.getElementById("signupPassword").value;
            const displayName = (document.getElementById("displayName") || {}).value || null;

            if (!email || !password) {
            alert("Please enter an email and password.");
            return;
            }

            try {
            const cred = await createUserWithEmailAndPassword(auth, email, password);
            // Optional: set display name
            if (displayName) {
                await updateProfile(cred.user, { displayName });
            }
            // Redirect â€” onAuthStateChanged in other pages will also catch this
            window.location.href = "homepage.html";
            } catch (err) {
            alert("Sign up failed: " + err.message);
            }
        });
    </script>


</body>
</html>
