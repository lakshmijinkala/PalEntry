<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PalNtry Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="loginpage.css">
</head>

<body>
    <div class="entire">

        <p class="name">PalNtry</p>

        <!-- Login Inputs -->
        <input id="email" type="text" placeholder="Email or Phone Number">
        <input id="password" type="password" placeholder="Password">

        <!-- Login Button -->
        <button id="loginBtn">Log In</button>

        <p class="forgot" style="margin-top:10px;">
            <span id="forgotPassword" style="cursor:pointer; color:blue;">Forgot Password?</span>
        </p>

        <p class="signup">
            Don't have an account? <span id="goSignup" style="color:blue; cursor:pointer;">Sign Up</span>
        </p>

    </div>

    <!-- Firebase + Login Script -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import {
            getAuth,
            signInWithEmailAndPassword,
            onAuthStateChanged
        } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

        // Firebase configuration (same as you already had)
        const firebaseConfig = {
            apiKey: "AIzaSyBcKwN19YU2vNb8bCdQRvenKVVTgMbbsR8",
            authDomain: "palntry.firebaseapp.com",
            projectId: "palntry",
            storageBucket: "palntry.firebasestorage.app",
            messagingSenderId: "664869269406",
            appId: "1:664869269406:web:2cdc64f5e64b42d0bdb08f",
            measurementId: "G-M8NFF4V16W"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // If user is already signed in, go to homepage
        onAuthStateChanged(auth, (user) => {
            if (user) {
            // user is signed in -> redirect to homepage
            window.location.href = "homepage.html";
            }
        });

        // LOGIN BUTTON
        document.getElementById("loginBtn").addEventListener("click", () => {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            if (!email || !password) {
            alert("Please enter both email and password.");
            return;
            }

            signInWithEmailAndPassword(auth, email, password)
            .then(() => {
                // onAuthStateChanged above will also redirect; but keep this for immediate UX
                window.location.href = "homepage.html";
            })
            .catch((error) => {
                alert("Login failed: " + error.message);
            });
        });

        // SIGN UP LINK
        document.getElementById("goSignup").addEventListener("click", () => {
            window.location.href = "signuppage.html";
        });

        // FORGOT PASSWORD LINK
        document.getElementById("forgotPassword").addEventListener("click", () => {
            window.location.href = "forgotpassword.html";
        });
    </script>



</body>
</html>
